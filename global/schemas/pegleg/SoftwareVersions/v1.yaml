---
schema: 'deckhand/DataSchema/v1'
metadata:
  schema: metadata/Control/v1
  name: pegleg/SoftwareVersions/v1
data:
  $schema: 'http://json-schema.org/schema#'
  definitions:
    chart_source:
      type: object
      additionalProperties: false
      properties:
        type:
          type: string
        location:
          type: string
        subpath:
          type: string
        reference:
          type: string
        proxy_server:
          type: string
        auth_method:
          type: string
      required:
        - location
        - type
  type: object
  additionalProperties: false
  properties:
    charts:
      type: object
      properties:
        kubernetes:
          type: object
          properties:
            calico:
              type: object
              properties:
                etcd:
                  $ref: '#/definitions/chart_source'
                calico:
                  $ref: '#/definitions/chart_source'
                tigera-secure-ee:
                  $ref: '#/definitions/chart_source'
            apiserver:
              $ref: '#/definitions/chart_source'
            controller-manager:
              $ref: '#/definitions/chart_source'
            coredns:
              $ref: '#/definitions/chart_source'
            haroxy:
              $ref: '#/definitions/chart_source'
            etcd:
              $ref: '#/definitions/chart_source'
            ingress:
              $ref: '#/definitions/chart_source'
            proxy:
              $ref: '#/definitions/chart_source'
            scheduler:
              $ref: '#/definitions/chart_source'
        osh_infra:
          type: object
          properties:
            elasticsearch:
              $ref: '#/definitions/chart_source'
            fluentd:
              $ref: '#/definitions/chart_source'
            kibana:
              $ref: '#/definitions/chart_source'
            prometheus:
              $ref: '#/definitions/chart_source'
            prometheus_node_exporter:
              $ref: '#/definitions/chart_source'
            prometheus_kube_state_metrics:
              $ref: '#/definitions/chart_source'
            prometheus_alertmanager:
              $ref: '#/definitions/chart_source'
            grafana:
              $ref: '#/definitions/chart_source'
            prometheus_openstack_exporter:
              $ref: '#/definitions/chart_source'
            nagios:
              $ref: '#/definitions/chart_source'
        ro:
          type: object
          properties:
            ro_inventory_notifier:
              $ref: '#/definitions/chart_source'
        nc-aggregator:
          type: object
          properties:
            nc-aggregator-htk:
              $ref: '#/definitions/chart_source'
            nc-aggregator:
              $ref: '#/definitions/chart_source'
        ozone:
          type: object
          properties:
            ozone-api:
              $ref: '#/definitions/chart_source'
            ozone-collector:
              $ref: '#/definitions/chart_source'
        osh_addons:
          type: object
          properties:
            ranger:
              $ref: '#/definitions/chart_source'
            ranger-agent:
              $ref: '#/definitions/chart_source'
        osh:
          type: object
          properties:
            barbican:
              $ref: '#/definitions/chart_source'
            cinder:
              $ref: '#/definitions/chart_source'
            glance:
              $ref: '#/definitions/chart_source'
            heat:
              $ref: '#/definitions/chart_source'
            horizon:
              $ref: '#/definitions/chart_source'
            ingress:
              $ref: '#/definitions/chart_source'
            keystone:
              $ref: '#/definitions/chart_source'
            libvirt:
              $ref: '#/definitions/chart_source'
            mariadb:
              $ref: '#/definitions/chart_source'
            memcached:
              $ref: '#/definitions/chart_source'
            neutron:
              $ref: '#/definitions/chart_source'
            nova:
              $ref: '#/definitions/chart_source'
            openvswitch:
              $ref: '#/definitions/chart_source'
            rabbitmq:
              $ref: '#/definitions/chart_source'
        ucp:
          type: object
          properties:
            armada:
              $ref: '#/definitions/chart_source'
            barbican:
              $ref: '#/definitions/chart_source'
            ceph-mon:
              $ref: '#/definitions/chart_source'
            ceph-osd:
              $ref: '#/definitions/chart_source'
            ceph-client:
              $ref: '#/definitions/chart_source'
            ceph-provisioners:
              $ref: '#/definitions/chart_source'
            ceph-rgw:
              $ref: '#/definitions/chart_source'
            tenant-ceph-mon:
              $ref: '#/definitions/chart_source'
            tenant-ceph-osd:
              $ref: '#/definitions/chart_source'
            tenant-ceph-client:
              $ref: '#/definitions/chart_source'
            tenant-ceph-provisioners:
              $ref: '#/definitions/chart_source'
            tenant-ceph-rgw:
              $ref: '#/definitions/chart_source'
            deckhand:
              $ref: '#/definitions/chart_source'
            drydock:
              $ref: '#/definitions/chart_source'
            ingress:
              $ref: '#/definitions/chart_source'
            postgresql:
              $ref: '#/definitions/chart_source'
            promenade:
              $ref: '#/definitions/chart_source'
            keystone:
              $ref: '#/definitions/chart_source'
            maas:
              $ref: '#/definitions/chart_source'
            mariadb:
              $ref: '#/definitions/chart_source'
            memcached:
              $ref: '#/definitions/chart_source'
            rabbitmq:
              $ref: '#/definitions/chart_source'
            rabbitmq-etcd:
              $ref: '#/definitions/chart_source'
            shipyard:
              $ref: '#/definitions/chart_source'
            tiller:
              $ref: '#/definitions/chart_source'
        utility:
          type: object
          properties:
            calicoctl-utility:
              $ref: '#/definitions/chart_source'
            ceph-utility:
              $ref: '#/definitions/chart_source'
            compute-utility:
              $ref: '#/definitions/chart_source'
            etcdctl-utility:
              $ref: '#/definitions/chart_source'
            mysqlclient-utility:
              $ref: '#/definitions/chart_source'
            openstack-utility:
              $ref: '#/definitions/chart_source'
            postgresql-utility:
              $ref: '#/definitions/chart_source'
            ncct-utility:
              $ref: '#/definitions/chart_source'
    files:
      type: object
      properties:
        kubelet:
          type: string
    images:
      type: object
      properties:
        ucp:
          type: object
          properties:
            armada:
              type: object
              properties:
                api:
                  type: string
                dep_check:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
                helm:
                  type: string
                tiller:
                  type: string
            promenade:
              type: object
              properties:
                dep_check:
                  type: string
                promenade:
                  type: string
                ks_user:
                  type: string
                ks_service:
                  type: string
                ks_endpoints:
                  type: string
            deckhand:
              type: object
              properties:
                deckhand:
                  type: string
                dep_check:
                  type: string
                db_init:
                  type: string
                db_sync:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
            barbican:
              type: object
              properties:
                bootstrap:
                  type: string
                dep_check:
                  type: string
                scripted_test:
                  type: string
                db_init:
                  type: string
                barbican_db_sync:
                  type: string
                db_drop:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
                barbican_api:
                  type: string
            drydock:
              type: object
              properties:
                drydock:
                  type: string
                dep_check:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
                drydock_db_init:
                  type: string
                drydock_db_sync:
                  type: string
            shipyard:
              type: object
              properties:
                airflow:
                  type: string
                shipyard:
                  type: string
                dep_check:
                  type: string
                shipyard_db_init:
                  type: string
                shipyard_db_auxiliary:
                  type: string
                shipyard_db_sync:
                  type: string
                airflow_db_init:
                  type: string
                airflow_db_sync:
                  type: string
                ks_user:
                  type: string
                ks_service:
                  type: string
                ks_endpoints:
                  type: string
            maas:
              type: object
              properties:
                db_init:
                  type: string
                db_sync:
                  type: string
                maas_rack:
                  type: string
                maas_region:
                  type: string
                bootstrap:
                  type: string
                export_api_key:
                  type: string
                maas_cache:
                  type: string
                dep_check:
                  type: string
            keystone:
              type: object
              properties:
                keystone_bootstrap:
                  type: string
                test:
                  type: string
                db_init:
                  type: string
                keystone_db_sync:
                  type: string
                db_drop:
                  type: string
                keystone_fernet_setup:
                  type: string
                keystone_fernet_rotate:
                  type: string
                keystone_credential_setup:
                  type: string
                keystone_credential_rotate:
                  type: string
                keystone_api:
                  type: string
                dep_check:
                  type: string
            tiller:
              type: object
              properties:
                tiller:
                  type: string
            mariadb:
              type: object
              properties:
                mariadb:
                  type: string
                dep_check:
                  type: string
                scripted_test:
                  type: string
            postgresql:
              type: object
              properties:
                postgresql:
                  type: string
                dep_check:
                  type: string
            memcached:
              type: object
              properties:
                memcached:
                  type: string
                dep_check:
                  type: string
            rabbitmq:
              type: object
              properties:
                rabbitmq:
                  type: string
                dep_check:
                  type: string
        utility:
          type: object
          properties:
            ceph-utility:
              type: object
              properties:
                ceph_utility:
                  type: string
                image_repo_sync:
                  type: string
            calicoctl-utility:
              type: object
              properties:
                calicoctl_utility:
                  type: string
                image_repo_sync:
                  type: string
            compute-utility:
              type: object
              properties:
                compute_utility:
                  type: string
                image_repo_sync:
                  type: string
            etcdctl-utility:
              type: object
              properties:
                etcdctl-utility:
                  type: string
                image_repo_sync:
                  type: string
            mysqlclient-utility:
              type: object
              properties:
                mysqlclient_utility:
                  type: string
                image_repo_sync:
                  type: string
            openstack-utility:
              type: object
              properties:
                openstack_utility:
                  type: string
                image_repo_sync:
                  type: string
            postgresql-utility:
              type: object
              properties:
                postgresql_utility:
                  type: string
                image_repo_sync:
                  type: string
            ncct-utility:
              type: object
              properties:
                ncct_utility:
                  type: string
                image_repo_sync:
                  type: string
        ceph:
          type: object
          properties:
            ceph-mon:
              type: object
              properties:
                fluentbit:
                  type: string
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_mon:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_mon_check:
                  type: string
                image_repo_sync:
                  type: string
            ceph-osd:
              type: object
              properties:
                fluentbit:
                  type: string
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_osd:
                  type: string
                image_repo_sync:
                  type: string
            ceph-client:
              type: object
              properties:
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_mds:
                  type: string
                ceph_mgr:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_rbd_pool:
                  type: string
                image_repo_sync:
                  type: string
            ceph-provisioners:
              type: object
              properties:
                ceph_bootstrap:
                  type: string
                ceph_cephfs_provisioner:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_rbd_provisioner:
                  type: string
                dep_check:
                  type: string
                image_repo_sync:
                  type: string
            ceph-rgw:
              type: object
              properties:
                ceph_config_helper:
                  type: string
                ceph_rgw:
                  type: string
                dep_check:
                  type: string
                image_repo_sync:
                  type: string
                rgw_s3_admin:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
            tenant-ceph-mon:
              type: object
              properties:
                fluentbit:
                  type: string
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_mon:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_mon_check:
                  type: string
                image_repo_sync:
                  type: string
            tenant-ceph-osd:
              type: object
              properties:
                fluentbit:
                  type: string
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_osd:
                  type: string
                image_repo_sync:
                  type: string
            tenant-ceph-client:
              type: object
              properties:
                ceph_bootstrap:
                  type: string
                dep_check:
                  type: string
                ceph_mds:
                  type: string
                ceph_mgr:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_rbd_pool:
                  type: string
                image_repo_sync:
                  type: string
            tenant-ceph-provisioners:
              type: object
              properties:
                ceph_bootstrap:
                  type: string
                ceph_cephfs_provisioner:
                  type: string
                ceph_config_helper:
                  type: string
                ceph_rbd_provisioner:
                  type: string
                dep_check:
                  type: string
                image_repo_sync:
                  type: string
            tenant-ceph-rgw:
              type: object
              properties:
                ceph_config_helper:
                  type: string
                ceph_rgw:
                  type: string
                dep_check:
                  type: string
                image_repo_sync:
                  type: string
                rgw_s3_admin:
                  type: string
                ks_endpoints:
                  type: string
                ks_service:
                  type: string
                ks_user:
                  type: string
        kubernetes:
          type: object
          properties:
            apiserver:
              type: object
              properties:
                anchor:
                  type: string
                apiserver:
                  type: string
                dep_check:
                  type: string
            controller-manager:
              type: object
              properties:
                anchor:
                  type: string
                controller_manager:
                  type: string
                dep_check:
                  type: string
            coredns:
              type: object
              properties:
                coredns:
                  type: string
            haproxy:
              type: object
              properties:
                haproxy:
                  type: string
                anchor:
                  type: string
            etcd:
              type: object
              properties:
                etcd:
                  type: string
                etcdctl:
                  type: string
            kubectl:
              type: string
            pause:
              type: string
            scheduler:
              type: object
              properties:
                anchor:
                  type: string
                scheduler:
                  type: string
            proxy:
              type: object
              properties:
                proxy:
                  type: string
        calico:
          type: object
          properties:
            etcd:
              type: object
              properties:
                etcd:
                  type: string
                etcdctl:
                  type: string
            calico:
              type: object
              properties:
                cni:
                  type: string
                ctl:
                  type: string
                node:
                  type: string
                policy_controller:
                  type: string
        cicd:
          type: object
          properties:
            generic_pipe:
              type: object
              properties:
                ipmi_tools:
                  type: string
        nc-aggregator:
          type: object
          properties:
            nc-aggregator:
              type: string

    packages:
      type: object
      properties:
        repositories:
          type: object
          additionalProperties:
            type: object
            properties:
              name:
                type: string
              url:
                type: string
              distributions:
                type: array
                items:
                  type: string
              components:
                type: array
                items:
                  type: string
              gpgkey:
                type: string
        named:
          type: object
          properties:
            docker:
              type: string
            socat:
              type: string
        unnamed:
          type: array
          items:
            type: string

    validation:
      type: object
      properties:
        pod_logs:
          type: object
          properties:
            image:
              type: string

    kernel_drivers:
      type: object

    images_refs:
      type: object
      properties:
        images:
          type: object
        # TODO: Remove keystone: when it has been moved under images_refs.images
        keystone:
          type: object
...
